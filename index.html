<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LunaBelle | Women's Clothing</title>

  <!-- Google Fonts (Poppins for a fresh, modern look) -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root{
      --bg:#f8fafc;           /* light backdrop */
      --panel:#ffffff;        /* cards */
      --ink:#0f172a;          /* text dark */
      --muted:#64748b;        /* subdued text */
      --line:#e2e8f0;         /* borders */
      --brand:#e11d48;        /* rose-600 */
      --brand-weak:rgba(225,29,72,.12);
      --accent:#22c55e;       /* green accent for success */
      --ring:rgba(225,29,72,.22);
      --radius:14px;
      --shadow:0 10px 30px rgba(2,6,23,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:'Poppins',system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;
      color:var(--ink); background:var(--bg); line-height:1.7;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    a{color:inherit; text-decoration:none}
    img{max-width:100%; display:block}

    /* Header */
    header{
      position:sticky; top:0; z-index:40; background:rgba(255,255,255,.85);
      backdrop-filter:blur(8px); border-bottom:1px solid var(--line);
    }
    .nav{
      max-width:1200px; margin:0 auto; padding:14px 20px;
      display:flex; align-items:center; gap:14px;
    }
    .brand{display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.3px}
    .brand i{color:var(--brand)}
    .nav-links{display:flex; gap:18px; margin-left:10px}
    .nav-links a{font-size:14px; color:#0f172a; opacity:.85}
    .nav-links a:hover{opacity:1}
    .grow{flex:1}
    .icon-btn{
      position:relative; border:1px solid var(--line);
      background:#fff; color:#0f172a; padding:10px 14px;
      border-radius:10px; cursor:pointer; transition:.22s;
    }
    .icon-btn:hover{box-shadow:0 0 0 4px var(--ring)}
    .badge{
      position:absolute; top:-6px; right:-6px; background:var(--brand);
      color:#fff; font-size:12px; padding:2px 6px; border-radius:999px; font-weight:700;
    }

    /* Hero */
    .hero{
      position:relative; min-height:62vh; display:grid; place-items:center; overflow:hidden;
      background:
        radial-gradient(1200px 500px at 10% 10%, #ffe4e6 0%, rgba(255,228,230,0) 60%),
        radial-gradient(1000px 500px at 90% 0%, #faf5ff 0%, rgba(250,245,255,0) 60%),
        linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
    }
    .hero-wrap{
      width:100%; max-width:1200px; padding:50px 20px; display:grid; grid-template-columns:1.2fr .8fr; gap:24px; align-items:center;
    }
    @media (max-width: 900px){ .hero-wrap{grid-template-columns:1fr; text-align:center} }
    .hero-text h1{font-size:40px; line-height:1.15; margin:0 0 10px}
    .hero-text p{color:var(--muted); margin:0 0 18px; max-width:620px}
    .cta{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    @media (max-width: 900px){ .cta{justify-content:center} }
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      padding:12px 18px; border-radius:10px; border:1px solid transparent; cursor:pointer; transition:.22s; font-weight:600; font-size:14px;
    }
    .btn.primary{background:var(--brand); color:#fff}
    .btn.primary:hover{filter:brightness(1.05); transform:translateY(-2px)}
    .btn.ghost{border:1px solid var(--line); background:#fff; color:#0f172a}
    .btn.ghost:hover{box-shadow:0 0 0 6px var(--ring)}
    .hero-shot{
      background:#fff; border:1px solid var(--line); border-radius:20px; overflow:hidden; box-shadow:var(--shadow)
    }
    .hero-shot img{width:100%; height:100%; object-fit:cover}

    /* Main */
    .container{max-width:1200px; margin:0 auto; padding:32px 20px 80px}
    .section-title{font-size:22px; font-weight:700; margin:14px 0 6px}
    .helper{color:var(--muted); font-size:14px; margin-bottom:16px}

    /* Toolbar */
    .toolbar{display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-bottom:18px}
    .filter-chip{
      border:1px solid var(--line); background:#fff; color:#0f172a; padding:8px 12px; border-radius:999px; cursor:pointer; font-size:13px;
    }
    .filter-chip.active{border-color:var(--brand); box-shadow:0 0 0 4px var(--ring)}
    .input{
      width:100%; border:1px solid var(--line); background:#fff;
      color:#0f172a; padding:11px 12px; border-radius:10px; outline:none;
    }
    .input:focus{border-color:var(--brand); box-shadow:0 0 0 4px var(--ring)}
    .select{
      border:1px solid var(--line); background:#fff; color:#0f172a; padding:11px 12px; border-radius:10px;
    }

    /* Grid */
    .grid{display:grid; grid-template-columns:repeat(4,1fr); gap:18px}
    @media (max-width:1024px){ .grid{grid-template-columns:repeat(3,1fr)} }
    @media (max-width:780px){ .grid{grid-template-columns:repeat(2,1fr)} }
    @media (max-width:520px){ .grid{grid-template-columns:1fr} }

    .card{
      background:var(--panel); border:1px solid var(--line);
      border-radius:16px; overflow:hidden; display:flex; flex-direction:column; box-shadow:var(--shadow);
    }
    .card .media{position:relative; background:#fff}
    .card img{width:100%; height:220px; object-fit:cover; display:block}
    .tag{
      position:absolute; left:12px; top:12px; background:var(--brand-weak);
      color:#be123c; border:1px solid rgba(225,29,72,.28);
      font-size:12px; padding:4px 8px; border-radius:999px;
    }
    .content{padding:14px}
    .title{font-weight:700; margin-bottom:6px}
    .desc{color:var(--muted); font-size:13px; min-height:42px}
    .price-row{display:flex; align-items:center; gap:10px; margin:12px 0}
    .price{font-weight:700}
    .compare{color:#94a3b8; text-decoration:line-through; font-size:13px}
    .actions{display:flex; gap:8px; margin-top:auto; padding:14px}
    .btn.small{padding:10px 12px}

    /* Drawer (Cart) */
    .drawer{
      position:fixed; top:0; right:-480px; width:460px; max-width:92vw; height:100%;
      background:#ffffff; border-left:1px solid var(--line); z-index:60;
      display:flex; flex-direction:column; transition:right .28s ease; box-shadow:-8px 0 30px rgba(2,6,23,.08);
    }
    .drawer.open{right:0}
    .drawer-header{
      display:flex; align-items:center; justify-content:space-between; padding:16px;
      border-bottom:1px solid var(--line);
    }
    .drawer-body{flex:1; overflow:auto; padding:14px}
    .cart-item{
      display:grid; grid-template-columns:64px 1fr auto; gap:10px; align-items:center;
      border-bottom:1px solid var(--line); padding:10px 0;
    }
    .cart-item img{width:64px; height:64px; object-fit:cover; border-radius:8px; border:1px solid var(--line)}
    .item-title{font-size:14px; font-weight:700}
    .item-meta{color:var(--muted); font-size:12px}
    .qty{display:flex; align-items:center; gap:8px}
    .qty button{
      width:28px; height:28px; border-radius:8px; border:1px solid var(--line);
      background:#fff; color:#0f172a; cursor:pointer;
    }
    .remove{color:var(--brand); background:transparent; border:none; cursor:pointer}
    .drawer-footer{
      border-top:1px solid var(--line); padding:16px; display:grid; gap:10px;
    }
    .total-row{display:flex; justify-content:space-between; align-items:center}
    .checkout{
      background:var(--brand); color:#fff; border:none; padding:12px; border-radius:10px;
      font-weight:700; cursor:pointer;
    }
    .checkout:hover{filter:brightness(1.05)}
    .empty{color:var(--muted); text-align:center; padding:24px 0}

    /* Footer */
    footer{
      background:#ffffff; color:var(--ink); padding:48px 20px; border-top:1px solid var(--line)
    }
    .foot{
      max-width:1200px; margin:0 auto; display:grid; gap:18px; grid-template-columns:2fr 1fr 1fr 1fr;
    }
    @media (max-width:780px){ .foot{grid-template-columns:1fr 1fr} }
    footer h5{margin:0 0 10px; color:#0f172a; font-size:13px}
    .copy{text-align:center; color:var(--muted); font-size:12px; margin-top:20px}
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <div class="nav" role="navigation" aria-label="Main navigation">
      <div class="brand"><i class="fa-solid fa-gem"></i> LunaBelle</div>
      <div class="nav-links">
        <a href="#shop">Shop</a>
        <a href="#collections">Collections</a>
        <a href="#about">About</a>
        <a href="#contact">Contact</a>
      </div>
      <div class="grow"></div>
      <button id="cartBtn" class="icon-btn" aria-label="Open cart">
        <i class="fa-solid fa-bag-shopping"></i>
        <span id="cartBadge" class="badge" aria-live="polite">0</span>
      </button>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero" id="home" aria-label="Hero">
    <div class="hero-wrap">
      <div class="hero-text">
        <h1>Effortless Style, Everyday Confidence.</h1>
        <p>Discover dresses, tops, and accessories designed to flatter and made to last—curated for modern women who love a clean, feminine aesthetic.</p>
        <div class="cta">
          <a href="#shop" class="btn primary"><i class="fa-solid fa-compass"></i> Shop New Arrivals</a>
          <a href="#collections" class="btn ghost"><i class="fa-solid fa-layer-group"></i> Explore Collections</a>
        </div>
      </div>
      <div class="hero-shot" aria-hidden="true">
        <img src="https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=1800&auto=format&fit=crop" alt="Woman in stylish dress on a sunny street">
      </div>
    </div>
  </section>

  <!-- Shop -->
  <main class="container" id="shop">
    <h2 class="section-title">Shop Women’s Clothing</h2>
    <p class="helper">Filter by category, search by keyword, or sort by price/popularity. Add items to your bag and check out later.</p>

    <div class="toolbar" role="toolbar" aria-label="Filters">
      <button class="filter-chip active" data-filter="all">All</button>
      <button class="filter-chip" data-filter="dresses">Dresses</button>
      <button class="filter-chip" data-filter="tops">Tops</button>
      <button class="filter-chip" data-filter="bottoms">Bottoms</button>
      <button class="filter-chip" data-filter="accessories">Accessories</button>

      <div class="grow"></div>
      <input id="q" class="input" type="search" placeholder="Search (e.g., floral, linen, blazer)" aria-label="Search products">
      <select id="sortSelect" class="select" aria-label="Sort">
        <option value="featured">Featured</option>
        <option value="priceAsc">Price: Low → High</option>
        <option value="priceDesc">Price: High → Low</option>
        <option value="rating">Popularity</option>
      </select>
    </div>

    <section id="grid" class="grid" aria-label="Product grid">
      <!-- Rendered by JS -->
    </section>
  </main>

  <!-- Collections (static teaser) -->
  <section class="container" id="collections">
    <h2 class="section-title">Collections</h2>
    <p class="helper">Seasonal edits and capsule wardrobes with pieces that mix and match effortlessly.</p>
    <div class="grid" style="grid-template-columns:repeat(3,1fr)">
      <article class="card">
        <div class="media">
          <img src="https://images.unsplash.com/photo-1520975661595-645391095997?q=80&w=1600&auto=format&fit=crop" alt="Soft pastel dresses on rack">
          <span class="tag">Spring Pastels</span>
        </div>
        <div class="content">
          <div class="title">Pastel Bloom</div>
          <p class="desc">Blush, lilac, and mint palettes in flowing fabrics.</p>
        </div>
        <div class="actions">
          <a class="btn ghost small" href="#shop"><i class="fa-solid fa-magnifying-glass"></i> View Items</a>
        </div>
      </article>
      <article class="card">
        <div class="media">
          <img src="https://images.unsplash.com/photo-1496747611176-843222e1e57c?q=80&w=1600&auto=format&fit=crop" alt="Woman in neutral-toned outfit walking">
          <span class="tag">Neutral Capsule</span>
        </div>
        <div class="content">
          <div class="title">Modern Neutrals</div>
          <p class="desc">Timeless sand, ivory, charcoal, and black basics.</p>
        </div>
        <div class="actions">
          <a class="btn ghost small" href="#shop"><i class="fa-solid fa-magnifying-glass"></i> View Items</a>
        </div>
      </article>
      <article class="card">
        <div class="media">
          <img src="https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=1600&auto=format&fit=crop" alt="Woman in chic city look">
          <span class="tag">City Chic</span>
        </div>
        <div class="content">
          <div class="title">City Edit</div>
          <p class="desc">Polished silhouettes for work and weekend.</p>
        </div>
        <div class="actions">
          <a class="btn ghost small" href="#shop"><i class="fa-solid fa-magnifying-glass"></i> View Items</a>
        </div>
      </article>
    </div>
  </section>

  <!-- Drawer: Cart -->
  <aside id="drawer" class="drawer" aria-label="Shopping cart" aria-hidden="true">
    <div class="drawer-header">
      <h3 style="margin:0">Your Bag</h3>
      <button id="closeDrawer" class="icon-btn" aria-label="Close cart"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <div id="cartList" class="drawer-body"><!-- Rendered by JS --></div>
    <div class="drawer-footer">
      <div class="total-row">
        <strong>Subtotal</strong>
        <div id="subtotal">$0</div>
      </div>
      <button id="checkoutBtn" class="checkout">Checkout</button>
      <small class="helper">Tax included where applicable. Shipping calculated at checkout.</small>
    </div>
  </aside>

  <!-- Footer -->
  <footer id="about">
    <div class="foot">
      <div>
        <h5>LunaBelle</h5>
        <p>Feminine, modern, effortless. Designed to feel good and look beautiful—day and night.</p>
      </div>
      <div>
        <h5>Shop</h5>
        <p>Dresses / Tops / Bottoms / Accessories</p>
      </div>
      <div>
        <h5>Support</h5>
        <p>Shipping & Returns / FAQ / Size Guide</p>
      </div>
      <div>
        <h5>Contact</h5>
        <p id="contact">hello@lunabelle.store<br>Al Rabee, Riyadh</p>
      </div>
    </div>
    <div class="copy">© 2026 LunaBelle. All rights reserved.</div>
  </footer>

  <script>
    /* ---------- PRODUCT DATA (sample) ---------- */
    const PRODUCTS = [
      {
        id:'p1', title:'Floral Midi Dress', category:'dresses', rating:4.8,
        price:89, compareAt:109, featured:true,
        img:'https://images.unsplash.com/photo-1520975661595-645391095997?q=80&w=1600&auto=format&fit=crop',
        desc:'Lightweight chiffon, tie waist, fully lined. Perfect for weekends.'
      },
      {
        id:'p2', title:'Silk Camisole', category:'tops', rating:4.6,
        price:49, compareAt:null, featured:false,
        img:'https://images.unsplash.com/photo-1503342394128-c104d54dba01?q=80&w=1600&auto=format&fit=crop',
        desc:'100% silk with a flattering V-neck. Layers beautifully.'
      },
      {
        id:'p3', title:'High-Rise Wide Pants', category:'bottoms', rating:4.7,
        price:72, compareAt:89, featured:true,
        img:'https://images.unsplash.com/photo-1551854838-212c50b4c184?q=80&w=1600&auto=format&fit=crop',
        desc:'Structured yet soft. Elegant drape with side pockets.'
      },
      {
        id:'p4', title:'Double-Breasted Blazer', category:'tops', rating:4.9,
        price:129, compareAt:149, featured:true,
        img:'https://images.unsplash.com/photo-1518112166137-85f9979a43ae?q=80&w=1600&auto=format&fit=crop',
        desc:'Tailored fit with a hint of stretch. Fully lined.'
      },
      {
        id:'p5', title:'Wrap Mini Dress', category:'dresses', rating:4.5,
        price:79, compareAt:null, featured:false,
        img:'https://images.unsplash.com/photo-1509631179647-0177331693ae?q=80&w=1600&auto=format&fit=crop',
        desc:'Soft jersey wrap with adjustable tie and flutter sleeves.'
      },
      {
        id:'p6', title:'Pleated Satin Skirt', category:'bottoms', rating:4.4,
        price:59, compareAt:null, featured:false,
        img:'https://images.unsplash.com/photo-1558769132-cb1aea458c5e?q=80&w=1600&auto=format&fit=crop',
        desc:'Midi length, subtle sheen, elastic waistband for comfort.'
      },
      {
        id:'p7', title:'Leather Crossbody Bag', category:'accessories', rating:4.7,
        price:95, compareAt:119, featured:true,
        img:'https://images.unsplash.com/photo-1548359638-8a6bfbcd4c1b?q=80&w=1600&auto=format&fit=crop',
        desc:'Minimal silhouette with adjustable strap and inner pocket.'
      },
      {
        id:'p8', title:'Cashmere Crew Sweater', category:'tops', rating:4.6,
        price:99, compareAt:129, featured:true,
        img:'https://images.unsplash.com/photo-1483985988355-763728e1935b?q=80&w=1600&auto=format&fit=crop',
        desc:'Grade-A cashmere. Feather-soft with timeless appeal.'
      },
      {
        id:'p9', title:'Belted Trench Coat', category:'tops', rating:4.8,
        price:149, compareAt:179, featured:true,
        img:'https://images.unsplash.com/photo-1520975922324-48f42ec3e304?q=80&w=1600&auto=format&fit=crop',
        desc:'Water-resistant finish, classic storm flap, removable belt.'
      },
      {
        id:'p10', title:'Silk Scarf', category:'accessories', rating:4.3,
        price:29, compareAt:null, featured:false,
        img:'https://images.unsplash.com/photo-1551537482-f2075a1d41f2?q=80&w=1600&auto=format&fit=crop',
        desc:'Hand-rolled edges. Add a pop of color to any outfit.'
      },
      {
        id:'p11', title:'Button-Down Linen Shirt', category:'tops', rating:4.5,
        price:55, compareAt:null, featured:false,
        img:'https://images.unsplash.com/photo-1520975922324-48f42ec3e304?q=80&w=1600&auto=format&fit=crop',
        desc:'Breathable, relaxed fit. A warm-weather staple.'
      },
      {
        id:'p12', title:'A-Line Denim Skirt', category:'bottoms', rating:4.4,
        price:48, compareAt:59, featured:false,
        img:'https://images.unsplash.com/photo-1509631179647-0177331693ae?q=80&w=1600&auto=format&fit=crop',
        desc:'Vintage-inspired A-line cut with front buttons.'
      }
    ];

    /* ---------- STATE ---------- */
    let state = {
      q:'', filter:'all', sort:'featured',
      cart: loadCart()
    };

    function loadCart(){
      try{
        const raw = localStorage.getItem('lunabelle_cart');
        return raw ? JSON.parse(raw) : {};
      }catch(e){ return {}; }
    }
    function saveCart(){ localStorage.setItem('lunabelle_cart', JSON.stringify(state.cart)); }

    /* ---------- UTILS ---------- */
    const usd = n => '$' + n.toLocaleString('en-US', {minimumFractionDigits:0, maximumFractionDigits:0});
    function bySort(a,b){
      const s = state.sort;
      if(s==='priceAsc') return a.price-b.price;
      if(s==='priceDesc') return b.price-a.price;
      if(s==='rating') return b.rating-a.rating;
      // featured first, then rating
      if(a.featured!==b.featured) return (a.featured? -1: 1);
      return b.rating-a.rating;
    }
    function matchProduct(p){
      const okFilter = (state.filter==='all' || p.category===state.filter);
      const q = state.q.trim().toLowerCase();
      const okQ = !q || p.title.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q);
      return okFilter && okQ;
    }

    /* ---------- RENDER: PRODUCTS ---------- */
    function renderProducts(){
      const grid = document.getElementById('grid');
      grid.innerHTML = '';
      const items = [...PRODUCTS].filter(matchProduct).sort(bySort);
      if(items.length===0){
        grid.innerHTML = `<div class="helper">No products matched. Try different filters or keywords.</div>`;
        return;
      }
      for(const p of items){
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="media">
            <img src="${p.img}" alt="${p.title}">
            ${p.featured ? `<span class="tag">Featured</span>`:''}
          </div>
          <div class="content">
            <div class="title">${p.title}</div>
            <div class="desc">${p.desc}</div>
            <div class="price-row">
              <div class="price">${usd(p.price)}</div>
              ${p.compareAt ? `<div class="compare">${usd(p.compareAt)}</div>`:''}
              <div title="Rating" style="margin-left:auto;color:#f59e0b"><i class="fa-solid fa-star"></i> ${p.rating.toFixed(1)}</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn ghost small" aria-label="Add to wishlist (visual only)"><i class="fa-regular fa-heart"></i> Wishlist</button>
            <button class="btn primary small" data-add="${p.id}" aria-label="Add ${p.title} to bag"><i class="fa-solid fa-bag-shopping"></i> Add to Bag</button>
          </div>
        `;
        grid.appendChild(card);
      }
    }

    /* ---------- CART ---------- */
    function cartCount(){ return Object.values(state.cart).reduce((a,it)=>a+it.qty,0); }
    function cartSubtotal(){ return Object.values(state.cart).reduce((a,it)=>a + it.qty*it.price,0); }

    function addToCart(id){
      const p = PRODUCTS.find(x=>x.id===id);
      if(!p) return;
      if(!state.cart[id]) state.cart[id] = { id:p.id, title:p.title, price:p.price, img:p.img, qty:0 };
      state.cart[id].qty++;
      saveCart(); renderCart(); updateBadge();
    }
    function changeQty(id, delta){
      if(!state.cart[id]) return;
      state.cart[id].qty += delta;
      if(state.cart[id].qty<=0) delete state.cart[id];
      saveCart(); renderCart(); updateBadge();
    }
    function removeItem(id){
      delete state.cart[id]; saveCart(); renderCart(); updateBadge();
    }
    function updateBadge(){
      document.getElementById('cartBadge').textContent = cartCount();
    }

    function renderCart(){
      const list = document.getElementById('cartList');
      const items = Object.values(state.cart);
      if(items.length===0){
        list.innerHTML = `<div class="empty">Your bag is empty. Add something beautiful!</div>`;
      } else {
        list.innerHTML = items.map(it=>`
          <div class="cart-item">
            <img src="${it.img}" alt="${it.title}">
            <div>
              <div class="item-title">${it.title}</div>
              <div class="item-meta">${usd(it.price)} each</div>
              <div class="qty" aria-label="Quantity">
                <button data-dec="${it.id}" aria-label="Decrease quantity">−</button>
                <span>${it.qty}</span>
                <button data-inc="${it.id}" aria-label="Increase quantity">＋</button>
                <button class="remove" data-rem="${it.id}" aria-label="Remove">Remove</button>
              </div>
            </div>
            <div style="font-weight:700">${usd(it.price*it.qty)}</div>
          </div>
        `).join('');
      }
      document.getElementById('subtotal').textContent = usd(cartSubtotal());
    }

    /* ---------- DRAWER OPEN/CLOSE ---------- */
    const drawer = document.getElementById('drawer');
    function openDrawer(){ drawer.classList.add('open'); drawer.setAttribute('aria-hidden','false'); }
    function closeDrawer(){ drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); }

    document.addEventListener('click', (e)=>{
      const add = e.target.closest('[data-add]');
      if(add){ addToCart(add.dataset.add); openDrawer(); }

      const inc = e.target.closest('[data-inc]');
      if(inc){ changeQty(inc.dataset.inc, +1); }

      const dec = e.target.closest('[data-dec]');
      if(dec){ changeQty(dec.dataset.dec, -1); }

      const rem = e.target.closest('[data-rem]');
      if(rem){ removeItem(rem.dataset.rem); }
    });

    document.getElementById('cartBtn').addEventListener('click', openDrawer);
    document.getElementById('closeDrawer').addEventListener('click', closeDrawer);
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeDrawer(); });

    document.getElementById('checkoutBtn').addEventListener('click', ()=>{
      if(cartCount()===0){ alert('Your bag is empty.'); return; }
      alert('Demo only — integrate Stripe/PayPal to accept payments and process orders.');
    });

    /* ---------- SEARCH / FILTER / SORT ---------- */
    document.getElementById('q').addEventListener('input', (e)=>{ state.q = e.target.value; renderProducts(); });
    document.querySelectorAll('.filter-chip').forEach(ch=>{
      ch.addEventListener('click', ()=>{
        document.querySelectorAll('.filter-chip').forEach(x=>x.classList.remove('active'));
        ch.classList.add('active');
        state.filter = ch.dataset.filter;
        renderProducts();
      });
    });
    document.getElementById('sortSelect').addEventListener('change', (e)=>{ state.sort = e.target.value; renderProducts(); });

    /* ---------- INITIAL RENDER ---------- */
    renderProducts(); renderCart(); updateBadge();
  </script>
</body>
</html>
